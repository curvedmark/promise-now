!function(){function t(){this.state=s,this.callbacks=[]}function n(t){return t&&"function"==typeof t.then}function i(t,i,s){return function(l,r,c){var a;if(l===e){if("function"!=typeof t)return s.fulfill(r,c);a=t}else{if("function"!=typeof i)return s.reject(r,c);a=i}try{r=a.call(c,r)}catch(o){return s.reject(o,c)}return n(r)?(r.then(function(t){s.fulfill(t,c)},function(t){s.reject(t,c)}),void 0):s.fulfill(r,c)}}var s=0,e=1,l=2;t.prototype.then=function(n,s){var e=new t,l=i(n,s,e);return this.state?this.runCallback(l):this.callbacks.push(l),e},t.prototype.fulfill=function(t,n){return this.state?this:(this.state=e,this.arg=t,this.context=n,this.runAllCallbacks(),this)},t.prototype.reject=function(t,n){return this.state?this:(this.state=l,this.arg=t,this.context=n,this.runAllCallbacks(),this)},t.prototype.runCallback=function(t){t(this.state,this.arg,this.context)},t.prototype.runAllCallbacks=function(){for(var t=0,n=this.callbacks.length;n>t;++t)this.callbacks[t](this.state,this.arg,this.context);this.callbacks=null},window.Promise=t}();