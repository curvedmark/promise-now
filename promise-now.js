!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makePromise=t}else"undefined"!=typeof window?window.Promise=t():global.Promise=t()}(function(){return function(t,e,n){function i(n,s){if(!e[n]){if(!t[n]){var o="function"==typeof require&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var f=e[n]={exports:{}};t[n][0].call(f.exports,function(e){var r=t[n][1][e];return i(r?r:e)},f,f.exports)}return e[n].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e){function n(){this.fns=[],this.started=!1}var i=[].slice;e.exports=n,n.prototype.add=function(t){this.fns.push(t),this.started&&this.runOne()},n.prototype.run=function(){this.started=!0,this.args=i.call(arguments,0),this.runOne()},n.prototype.runOne=function(){if(!this.pending&&this.fns.length){var t=this.fns.shift(),e=this;this.args.push(function(){e.pending=!1,e.args=i.call(arguments,0),e.runOne()}),this.pending=!0,t.apply(void 0,this.args)}}},{}],2:[function(t,e){function n(){this.state="pending",this.composers=[]}function i(t){return t&&"function"==typeof t.then}function r(t,e){return function(n,r,s){var o;if("fulfilled"===n&&"function"==typeof(o=t)||"rejected"===n&&"function"==typeof(o=e)){try{r=o(r)}catch(f){return r=f,n="rejected",s(n,r)}if(i(r))return r.then(function(t){s("fulfilled",t)},function(t){s("rejected",t)});n="fulfilled"}s(n,r)}}var s=t("./Composer");e.exports=n,n.prototype.then=function(t,e){var n=new s;return n.add(r(t,e)),this.composers.push(n),"pending"!==this.state&&this.runAllComposers(),{then:function(t,e){return n.add(r(t,e)),this}}},n.prototype.fulfill=function(t){return"pending"!==this.state?this:(this.state="fulfilled",this.value=t,this.runAllComposers(),this)},n.prototype.reject=function(t){return"pending"!==this.state?this:(this.state="rejected",this.reason=t,this.runAllComposers(),this)},n.prototype.runAllComposers=function(){for(var t="fulfilled"===this.state?this.value:this.reason;this.composers.length;){var e=this.composers.shift();e.run(this.state,t)}}},{"./Composer":1}]},{},[2])(2)});