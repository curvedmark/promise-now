!function(){function t(){this.state=e,this.composers=[]}function n(t){return t&&"function"==typeof t.then}function s(t,s){return function(i,e,u){var h;if(i===r&&"function"==typeof(h=t)||i===o&&"function"==typeof(h=s)){try{e=h(e)}catch(p){return e=p,i=o,u(i,e)}if(n(e))return e.then(function(t){u(r,t)},function(t){u(o,t)});i=r}u(i,e)}}function i(){this.queue=[],this.started=!1}var e=0,r=1,o=2;t.prototype.then=function(t,n){var e=new i;return e.add(s(t,n)),this.composers.push(e),this.state&&this.runAllComposers(),{then:function(t,n){return e.add(s(t,n)),this}}},t.prototype.fulfill=function(t){return this.state?this:(this.state=r,this.arg=t,this.runAllComposers(),this)},t.prototype.reject=function(t){return this.state?this:(this.state=o,this.arg=t,this.runAllComposers(),this)},t.prototype.runAllComposers=function(){for(;this.composers.length;){var t=this.composers.shift();t.run(this.state,this.arg)}};var u=[].push;i.prototype.add=function(t){this.queue.push(t),this.started&&this.runOne()},i.prototype.run=function(){this.started=!0,this.args=arguments,this.runOne()},i.prototype.runOne=function(){if(!this.pending&&this.queue.length){var t=this.queue.shift(),n=this;u.call(this.args,function(){n.pending=!1,n.args=arguments,n.runOne()}),this.pending=!0,t.apply(void 0,this.args)}},window.Promise=t}();