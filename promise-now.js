!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makePromise=t}else"undefined"!=typeof window?window.Promise=t():global.Promise=t()}(function(){return function(t,e,n){function r(n,o){if(!e[n]){if(!t[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=e[n]={exports:{}};t[n][0].call(u.exports,function(e){var i=t[n][1][e];return r(i?i:e)},u,u.exports)}return e[n].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e){function n(){this.fns=[],this.running=!1}var r=[].slice;e.exports=n,n.prototype.add=function(t){this.fns.push(t),this.running&&this.runOne()},n.prototype.run=function(){this.running=!0,this.args=r.call(arguments,0),this.runOne()},n.prototype.runOne=function(){if(this.fns.length){var t=this.fns.shift(),e=this;this.args.push(function(){e.args=r.call(arguments,0),e.runOne()}),t.apply(void 0,this.args)}}},{}],2:[function(t,e){function n(){this.state="pending",this.composers=[]}function r(t){return t&&"function"==typeof t.then}function i(t,e){return function(n,i,o){var s;if("fulfilled"===n&&"function"==typeof(s=t)||"rejected"===n&&"function"==typeof(s=e)){try{i=s(i)}catch(u){return i=u,n="rejected",o(n,i)}if(r(i))return i.then(function(t){o("fulfilled",t)},function(t){o("rejected",t)});n="fulfilled"}o(n,i)}}var o=t("./Composer");e.exports=n,n.prototype.then=function(t,e){var n=new o;return n.add(i(t,e)),this.composers.push(n),"pending"!==this.state&&this.runAllComposers(),{then:function(t,e){return n.add(i(t,e)),this}}},n.prototype.fulfill=function(t){return"pending"!==this.state?this:(this.state="fulfilled",this.value=t,this.runAllComposers(),this)},n.prototype.reject=function(t){return"pending"!==this.state?this:(this.state="rejected",this.reason=t,this.runAllComposers(),this)},n.prototype.runAllComposers=function(){for(var t="fulfilled"===this.state?this.value:this.reason;this.composers.length;){var e=this.composers.shift();e.run(this.state,t)}}},{"./Composer":1}]},{},[2])(2)});