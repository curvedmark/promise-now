!function(){function t(){this.state=e,this.callbacks=[]}var e=0,n=1,r=2;t.prototype.then=function(e,n){var r=new t,i=this.createCallback(e,n,r);return this.state?this.runCallback(i):this.callbacks.push(i),r},t.prototype.fulfill=function(t,e){return this.resolve(n,t,e)},t.prototype.reject=function(t,e){return this.resolve(r,t,e)},t.prototype.resolve=function(t,e,n){if(this.state)return this;this.state=t,this.arg=e,this.context=n;for(var r=0,i=this.callbacks.length;i>r;++r)this.callbacks[r]();return this.callbacks=null,this},t.prototype.runCallback=function(t){t()},t.prototype.createCallback=function(t,e,i){var c=this;return function(){var o,a=c.state,s=c.arg,l=c.context;if(a===n&&"function"==typeof(o=t)||a===r&&"function"==typeof(o=e)){try{s=o.call(l,s)}catch(u){return i.reject(u,l)}if(s&&"function"==typeof s.then)return s.then(function(t){i.fulfill(t,l)},function(t){i.reject(t,l)});a=n}i.resolve(a,s,l)}},window.Promise=t}();