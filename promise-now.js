!function(){function t(){this.state="pending",this.composers=[]}function n(t){return t&&"function"==typeof t.then}function e(t,e){return function(i,s,r){var o;if("fulfilled"===i&&"function"==typeof(o=t)||"rejected"===i&&"function"==typeof(o=e)){try{s=o(s)}catch(u){return s=u,i="rejected",r(i,s)}if(n(s))return s.then(function(t){r("fulfilled",t)},function(t){r("rejected",t)});i="fulfilled"}r(i,s)}}function i(){this.queue=[],this.started=!1}t.prototype.then=function(t,n){var s=new i;return s.add(e(t,n)),this.composers.push(s),"pending"!==this.state&&this.runAllComposers(),{then:function(t,n){return s.add(e(t,n)),this}}},t.prototype.fulfill=function(t){return"pending"!==this.state?this:(this.state="fulfilled",this.arg=t,this.runAllComposers(),this)},t.prototype.reject=function(t){return"pending"!==this.state?this:(this.state="rejected",this.arg=t,this.runAllComposers(),this)},t.prototype.runAllComposers=function(){for(;this.composers.length;){var t=this.composers.shift();t.run(this.state,this.arg)}};var s=[].push;i.prototype.add=function(t){this.queue.push(t),this.started&&this.runOne()},i.prototype.run=function(){this.started=!0,this.args=arguments,this.runOne()},i.prototype.runOne=function(){if(!this.pending&&this.queue.length){var t=this.queue.shift(),n=this;s.call(this.args,function(){n.pending=!1,n.args=arguments,n.runOne()}),this.pending=!0,t.apply(void 0,this.args)}},window.Promise=t}();