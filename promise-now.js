!function(){function t(){this.state=n,this.callbacks=[]}var n=0,i=1,e=2;t.prototype.then=function(n,i){if(!n&&!i)return this;var e=new t,r=this.createCallback(n,i,e);return this.state?this.runCallback(r):this.callbacks.push(r),e},t.prototype.done=function(t,n){this.then(t,n).then(null,function(t){setTimeout(function(){throw t},0)})},t.prototype.fulfill=function(t,n){return this.state?this:(this.state=i,this.arg=t,this.context=n,this.runCallbacks(),this)},t.prototype.reject=function(t,n){return this.state?this:(this.state=e,this.arg=t,this.context=n,this.runCallbacks(),this)},t.prototype.runCallback=function(t){t()},t.prototype.runCallbacks=function(){for(var t=0,n=this.callbacks.length;n>t;++t)this.callbacks[t]();this.callbacks=null},t.prototype.createCallback=function(t,n,e){var r=this;return function(){var c,s=r.state,l=r.arg,o=r.context;if(s===i){if("function"!=typeof t)return e.fulfill(l,o);c=t}else{if("function"!=typeof n)return e.reject(l,o);c=n}try{l=c.call(o,l)}catch(a){return e.reject(a,o)}return l&&"function"==typeof l.then?(l.then(function(t){e.fulfill(t,o)},function(t){e.reject(t,o)}),void 0):e.fulfill(l,o)}},window.Promise=t}();